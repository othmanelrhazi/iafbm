<!DOCTYPE html>

<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Structure des répertoires</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
  </head>

  <body>
    <div class="container">
      <div class="actions">
        <a href="http://unil.github.io/iafbm/documentation/manual/Home.html">Home</a>
      </div>
      <div class="content wikistyle gollum markdown">
        <h1>Structure des répertoires</h1>

<h1>TODO</h1>

<p>Prendre chaque lien rouge ci-dessous et trouver ou créer la recette correspondante (ca devrait couvrir 90% du de l'application)</p>

<h2>Structure</h2>

<p>Les répertoires sont structurés en oignon:</p>

<ul>
<li>Le répertoire dit <strong>racine</strong> <code>iafbm/</code> contient les éléments d'infrastructure (déployement, maintenance, migration, tests unitaires, etc)</li>
<li>Le sous-répertoire dit <strong>de projet</strong> <code>iafbm/iafbm/</code> contient les éléments de projet (structurés selon les conventions du framework <a href="https://github.com/damiencorpataux/xfm-php/wiki/Conceptual-project-directory-structure">xfm-php</a>)</li>
</ul><p>Voici les 2 premiers niveaux de la structure des répertoires de l'application:
</p><pre><code>iafbm
├── iafbm
│   ├── config
│   ├── controllers
│   ├── fronts
│   ├── lib
│   ├── models
│   ├── public
│   └── views
├── import
├── scripts
├── sql
└── unittests</code></pre>

<h3>Typologie générale</h3>

<p>La structure des répertoires compartimente les principaux composants de l'application:</p>

<ul>
<li>
<strong>L'infrastructure de l'application</strong> dans le répertoire <strong><a class="internal present" href="http://unil.github.io/iafbm/documentation/manual/General-structure-repertoires.html#iafbm-infrastructure">iafbm/</a></strong>
</li>
<li>
<strong>Le projet applicatif xfm-php</strong> dans le répertoire <strong><a class="internal present" href="http://unil.github.io/iafbm/documentation/manual/General-structure-repertoires.html#iafbmiafbm-projet-xfm">iafbm/iafbm/</a></strong>
</li>
<li>
<strong>Les composants applicatifs extjs</strong> dans le répertoire <strong><a class="internal present" href="http://unil.github.io/iafbm/documentation/manual/General-structure-repertoires.html#iafbmiafbmpublicassetsjsapp">iafbm/iafbm/public/assets/js/app/</a></strong>
</li>
<li>
<strong>Les librairies:</strong> <br><ul>
<li>
<strong>php</strong> dans le répertoire <strong><a class="internal present" href="http://unil.github.io/iafbm/documentation/manual/General-structure-repertoires.html#iafbmiafbmlib">iafbm/iafbm/lib/</a></strong> <br>
</li>
<li>
<strong>javascript</strong> dans le répertoire <strong><a class="internal present" href="http://unil.github.io/iafbm/documentation/manual/General-structure-repertoires.html#iafbmiafbmpublicassetsjs">iafbm/iafbm/public/assets/js/</a></strong>
</li>
</ul>
</li>
<li>
<strong>La partie publique</strong>, accessible en lecture via le web, dans le répertoire <strong><a class="internal present" href="http://unil.github.io/iafbm/documentation/manual/General-structure-repertoires.html#iafbmiafbmpublic-web-world-readable">iafbm/iafbm/public/</a></strong>
</li>
</ul><h2>Détail des répertoires</h2>

<h3>
<a href="https://github.com/unil/iafbm/tree/master">iafbm/</a> (infrastructure)</h3>

<p>Il s'agit du <strong>répertoire d'infrastructure</strong>, contenant les composants supportant le fonctionnement de l'application xfm.</p>

<h4><a href="https://github.com/unil/iafbm/tree/master/sql">iafbm/sql/</a></h4>

<p>Le répertoire <code>sql/</code> contient les fichiers SQL pour la <a class="internal absent" href="http://unil.github.io/iafbm/documentation/manual/cr%C3%A9ation-de-la-base-de-donn%C3%A9es-et-des-tables.html">création de la base de données et des tables</a>. Ils sont exécutés par le <a href="https://github.com/unil/iafbm/blob/master/scripts/deploy.sh">script de déploiement</a>.
</p><pre><code>iafbm
├── ...
├── sql
│   ├── 000_database.sql
│   ├── 001_versions.sql
│   ├── 002_archives.sql
│   ├── 005_grandeurs.sql
│   ├── 010_cantons.sql
│   ├── ...
:   :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/">iafbm/import/</a></h4>

<p>Le répertoire <code>sql/</code> contient les fichiers CSV des <a class="internal absent" href="http://unil.github.io/iafbm/documentation/manual/donn%C3%A9es-externes-%C3%A0-importer.html">données externes à importer</a> (UNIL et CHUV) et des catalogues à peupler. Elles sont exécutées par le <a href="https://github.com/unil/iafbm/blob/master/scripts/import.sh">script d'import</a>.
</p><pre><code>iafbm
├── ...
├── import
│   └── csv
│   │   ├── activites_academiques.csv
│   │   ├── adresses.csv
│   │   ├── autre_mandats.csv
│   │   ├── ...
:   :   :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/scripts">iafbm/scripts/</a></h4>

<p>Le répertoire <code>scripts/</code> contient les scripts PHP permettant le <a class="internal absent" href="http://unil.github.io/iafbm/documentation/manual/d%C3%A9ployement.html">déployement</a> et la <a class="internal absent" href="http://unil.github.io/iafbm/documentation/manual/maintenance.html">maintenance</a> de l'application.
Le répertoire <code>scripts/migrations</code> contient l'archive des scripts de <a class="internal absent" href="http://unil.github.io/iafbm/documentation/manual/migration.html">migration</a>.
</p><pre><code>iafbm
├── ...
├── scripts
│   ├── deploy.sh
│   ├── import.php
│   ├── migrations
│   │   ├── issue#178-commission-membre.php
│   │   ├── issue#181-personne-denomination.php
│   │   ├── issue#191-commission-fonction-add.php
│   │   ├── ...
│   │   └── vendors
│   │       └── parsecsv-0.3.2
│   ├── Script.php
│   └── update.php
:</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/unittest">iafbm/unittests/</a></h4>

<p>Le répertoire <code>unittests/</code> contient les scripts PHP permettant la <a class="internal absent" href="http://unil.github.io/iafbm/documentation/manual/non-r%C3%A9gression-du-syst%C3%A8me.html">non-régression du système</a>.
Le répertoire <code>unittests/units</code> contient les tests unitaires à proprement parler.
</p><pre><code>iafbm
├── ...
├── unittests
│   ├── lib
│   │   ├── iaPHPUnit_Auth_Framework_TestCase.php
│   │   └── iaPHPUnit_Framework_TestCase.php
│   ├── phpunit.php
│   ├── suites
│   │   └── All.php
│   └── units
│       ├── ArchivingTest.php
│       ├── AuthenticationTest.php
│       ├── IafbmRolesTest.php
│       ├── ...
:       :</code></pre>

<hr><h3>
<a href="https://github.com/unil/iafbm/tree/master/iafbm">iafbm/iafbm/</a> (projet xfm)</h3>

<p>Il s'agit du <strong>répertoire de projet</strong>, dont la structure suit les <a href="https://github.com/damiencorpataux/xfm-php/wiki/Conceptual-project-directory-structure">conventions xfm-php</a>:
</p><pre><code>iafbm
├── iafbm
│   ├── config
│   ├── controllers
│   ├── fronts
│   ├── lib
│   ├── models
│   ├── public
│   └── views
:</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/lib">iafbm/iafbm/lib/</a></h4>

<p>Ce répertoire contient les librairies utilisées au sein du projet - notamment la librairie du framework xfm, dompdf pour la génération de documents PDF ainsi que les librairies spécifiques au projet iafbm.
</p><pre><code>iafbm
├── iafbm
│   ├── lib
│   │   ├── dompdf -&gt; dompdf-0.5.1
│   │   ├── dompdf-0.5.1
│   │   ├── iafbm
│   │   ├── Minify
│   │   └── xfm
:   :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/lib/iafbm">iafbm/iafbm/lib/iafbm/</a></h4>

<p>Ce répertoire contient les librairies sécifiques au projet iafbm. Notamment, les extensions des composants du framework xfm.
</p><pre><code>iafbm
├── iafbm
│   ├── lib
│   │   ├── iafbm
│   │   │   └── xfm
│   │   │       ├── iaAuth.php
│   │   │       ├── iaBootstrap.php
│   │   │       ├── iaExtRestController.php
│   │   │       ├── iaJournalingModelMysql.php
:   :   :       └── iaModelMysql.php</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/lib/xfm">iafbm/iafbm/lib/xfm/</a></h4>

<p>Contient la <a href="https://github.com/damiencorpataux/xfm-php">librairie du framework xfm-php</a>.</p>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/views/common">iafbm/iafbm/views/common/</a></h4>

<p>Contient les vues réutilisables, notamment les vues <code>model/</code> utilisées pour <a href="https://github.com/damiencorpataux/xfm-php/wiki/Cookbook-model-xwhere">les clauses wheres scriptables</a>.
</p><pre><code>iafbm
├── iafbm
│   └── views
│       ├── common
│       │   ├── extjs
│       │   ├── field
│       │   ├── map
│       │   └── model
:       :</code></pre>

<hr><h3>
<a href="https://github.com/unil/iafbm/tree/master/iafbm/public">iafbm/iafbm/public/</a> (web world readable)</h3>

<p>Ce répertoire est le répertoire racine du serveur web, il contient les fichiers devant être accessibles par le web (index.php, fichiers js et css, etc).
</p><pre><code>iafbm
├── iafbm
│   ├── public
│   │   ├── a -&gt; assets/
│   │   ├── assets
│   │   │   ├── css
│   │   │   ├── img
│   │   │   └── js
│   │   ├── favicon.ico
│   │   └── index.php
:   :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/public/assets">iafbm/iafbm/public/assets/</a></h4>

<p>Ce répertoire contient les composants du projet devant être accessibles au web:.
</p><pre><code>iafbm
├── iafbm
│   ├── public
│   │   ├── assets
│   │   │   ├── css
│   │   │   │   ├── layout.css
│   │   │   │   └── ...
│   │   │   ├── img
│   │   │   │   ├── icons
│   │   │   │   ├── ...
│   │   │   └── js
│   │   │       ├── app
│   │   │       ├── ext-4.0.7-gpl
│   │   │       └── ...
:   :   :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/assets/js">iafbm/iafbm/public/assets/js/</a></h4>

<p>Ce répertoire contient les librairies javascript utilisées au sein du projet.
</p><pre><code>iafbm
├── iafbm
│   ├── public
│   │   ├── assets
│   │   │   └── js
│   │   │       ├── app
│   │   │       ├── ext -&gt; ext-4.0.7-gpl
│   │   │       ├── ext-4.0.7-gpl
│   │   │       ├── ext-custom
│   │   │       └── ext-ux
:   :   :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/js/app">iafbm/iafbm/public/assets/js/app/</a></h4>

<p>Ce répertoire contient la partie javascript de l'application.
</p><pre><code>iafbm
├── iafbm
│   ├── public
│   │   ├── assets
│   │   │   └── js
│   │   │       ├── app
│   │   │       │   ├── classes.js
│   │   │       │   ├── columns.js
│   │   │       │   ├── forms.js
│   │   │       │   ├── grids.js
│   │   │       │   ├── locales.js
│   │   │       │   └── models.js
:   :   :       :</code></pre>

<h4><a href="https://github.com/unil/iafbm/tree/master/iafbm/public/assets/img">iafbm/iafbm/public/assets/img/</a></h4>

<p>Ce répertoire contient les images utilisées au sein de l'application. Il est organisé en plusieurs sous-répertoires:</p>

<ul>
<li>
<strong>controllers:</strong> contient les images propres à chaque controller</li>
<li>
<strong>ext:</strong> les images utilisées par les composants ExtJs</li>
<li>
<strong>icons:</strong> icônes utilisées par tous les composants du projet</li>
<li>
<strong>id:</strong> images relatives à l'identité de l'application (logos, etc.)</li>
<li>
<strong>layout:</strong> images utilisées pour la mise en page de l'application
<pre><code>iafbm
├── iafbm
│   ├── public
│   │   ├── assets
│   │   │   ├── img
│   │   │   │   ├── controllers
│   │   │   │   │   ├── personnes
│   │   │   │   │   │   └── export
│   │   │   │   │   └── user
│   │   │   │   │       ├── email.png
│   │   │   │   │       └── ...
│   │   │   │   ├── ext
│   │   │   │   │   ├── add.png
│   │   │   │   │   └── ...
│   │   │   │   ├── icons
│   │   │   │   │   ├── icon-warning-small.gif
│   │   │   │   │   └── ...
│   │   │   │   ├── id
│   │   │   │   │   ├── favicon.ico
│   │   │   │   │   └── ...
│   │   │   │   └── layout
│   │   │   │       └── ...
:   :   :   :</code></pre>
#### <a href="https://github.com/unil/iafbm/tree/master/iafbm/public/assets/css">iafbm/iafbm/public/assets/css/</a>
Ce répertoire contient les fichiers CSS spécifiques à l'application.</li>
</ul>
      </div>
      <div class="admin">
        <footer class="footer">
          <small>Last edited by <b>Damien Corpataux</b>, 2013-07-08 14:33:03</small>
        </footer>
      </div>
    </div>
  </body>
</html>
